# 贡献者培训与产品化作战手册（中文版）

## 为什么写这份文档

这份文档要回答一个核心问题：  
`btcrun + btcaaron` 的价值，不是替代 Bitcoin Core 测试框架，而是把“贡献者入门路径”做成可复制、可迭代的产品化流程。

---

## 1）以前 vs 现在：测试人员培训方式的变化

## 以前（传统路径）

新贡献者通常要先：

1. 理解 Core 测试框架结构，
2. 阅读大型 functional test 文件与 helper，
3. 在既有 harness 里挂接新场景，
4. 在框架复杂性中定位失败原因。

典型痛点：

- 启动成本高，
- 在产出第一个有效结果前认知负担大，
- 小型负向测试迭代慢。

## 现在（btcrun + btcaaron 路径）

贡献者可以从聚焦脚本起步，直接获得：

1. 紧凑的交易/描述符构造能力，
2. 显式故障注入点，
3. 标准化输出（`CASE/EXPECT/ACTUAL/VERDICT`），
4. 面向实例的 RPC 快速验证。

结果：

- 更快获得“第一次成功”，
- 更清晰地建立“变异 -> 拒绝类别”映射，
- 更快从学员转为实验型贡献者。

---

## 2）我们这轮任务到底在训练什么（按 task）

## Task 1（tutorial triplet）

- **学习目标**：理解 valid/invalid/nonstandard-candidate 的分层思维。
- **测试内容**：descriptor 解析行为与错误预期。
- **训练能力**：提出假设并读懂 parser 错误。

## 交易级入门（key-path baseline）

- **学习目标**：看见“有效花费 / 无效签名 / 可上链基线”。
- **测试内容**：policy 接受与 consensus 确认。
- **训练能力**：区分 mempool 结果与链上结果。

## Task 2（control block 变异矩阵）

- **学习目标**：掌握 witness 层故障注入。
- **测试内容**：control block 结构类与承诺类失败。
- **训练能力**：字节级变异与 reject 分类。

## Task 3（签名 + 输出正确性矩阵）

- **学习目标**：真正理解签名承诺语义。
- **测试内容**：改签名与改输出都导致签名验证失败。
- **训练能力**：从“签名字节”上升到“交易摘要承诺”思维。

## Task 4（policy vs consensus split）

- **学习目标**：不再把 policy reject 误认为 consensus invalid。
- **测试内容**：高费交易在默认策略下拒绝，放宽后仍可挖矿。
- **训练能力**：正确解释本地策略护栏。

## Task 7（跨实例一致性）

- **学习目标**：结果必须可跨实例复现。
- **测试内容**：`testnet3` 与 `regtest` 的行为一致性。
- **训练能力**：一致性/分歧识别与差异诊断。

## Task 8 / 8.1（教学交付 + 反馈闭环）

- **学习目标**：从“个人可跑”升级到“班级可复制”。
- **测试内容**：教学材料可用性与反馈迭代机制。
- **训练能力**：证据报告写作、解释质量与实验设计提案。

---

## 3）建议培训路径（时间 + 能力）

| 阶段 | 对应任务 | 预计时长 | 入门能力 | 退出能力 |
|---|---|---:|---|---|
| 基础层 | Task 1 + 交易入门 | 1.0-1.5 小时 | 基础 Python + 终端 | 能跑通并解释基线/无效对照 |
| 变异层 | Task 2 + Task 3 | 1.5-2.0 小时 | 了解 witness 基础 | 能设计并分类负向场景 |
| 验证层 | Task 4 | 0.75-1.0 小时 | 知道 mempool/区块基本概念 | 能解释 policy vs consensus 分离 |
| 复现层 | Task 7 | 0.5-0.75 小时 | 能在两个实例跑脚本 | 能识别一致性/分歧信号 |
| 产出层 | Task 8 报告 | 0.5-1.0 小时 | 完成上述任务 | 产出可评审证据报告 |

**一轮完整训练总时长**：约 4.25-6.25 小时。

---

## 4）我们的工具链到底解耦了什么

`btcaaron + btcrun` 解耦的是“贡献者早期成长”与“立刻深度绑定 Core 大框架”：

1. **实验语义** 与 **框架内部细节**
2. **场景编写** 与 **harness 粘合代码**
3. **结果诊断** 与 **日志考古**
4. **教学交付** 与 **临场口传经验**

这就是“前置产品化”的本质：把早期成长路径打包成可复制流程。

---

## 5）这件事的项目意义

1. 降低 Bitcoin 测试贡献者首个有效产出的门槛。  
2. 提升 cohort 模式下的测试人才吞吐。  
3. 形成结构化、可审计的证据资产（用于资助申请与工程决策）。  
4. 建立“教学实验 -> Core 测试贡献”的桥梁路径。  

---

## 6）下一步还能扩展到哪些测试方向

## 近期可扩展

1. **Policy 矩阵扩展**：更多标准性与中继阈值场景。  
2. **Sighash 家族矩阵**：不同 sighash 语义下的输入/输出变异。  
3. **Script-path 深度矩阵**：多叶深度与 merkle path 变异类。  
4. **跨版本比较**：不同节点版本的回归信号。  

## 中期可扩展

1. **自动汇总报告**：批量运行后自动生成 markdown/json 摘要。  
2. **教学分析**：把学员误区与任务难度做统计映射。  
3. **Issue/PR 导出模板**：实验输出一键转 issue 证据格式。  

## 长期潜力

1. 贡献者 readiness benchmark 套件。  
2. 公共 mutation corpus（协议测试教学共用）。  
3. 从 ramp 脚本到 Core 贡献任务的映射通道。  

---

## 7）从现在开始的执行建议

1. 用 5-15 人先跑一轮 Task 8 试点。  
2. 用 Task 8.1 模板收学员与助教反馈。  
3. 按 prioritization rubric 排下一轮改进项。  
4. 先做一个高分扩展矩阵并复跑。  
5. 比较两轮教学信号质量，形成闭环改进。  

最终目标是形成稳定产品循环：  
**构建 -> 教学 -> 测量 -> 迭代**。

